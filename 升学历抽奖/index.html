<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>潭州升学历抽奖</title>
		<link rel="stylesheet" type="text/css" href="css/style.css"/>
		<script src="js/jquery-3.3.1.min.js"></script>
		<script src="http://appendix.tzidt.com/help/tzform.js"></script>
	</head>
	<body>
		<div class="container">
			<div id="Modal_frame">
				<div class="ipt">
					<button title="关闭">X</button><br />
					<input type="text" placeholder="请输入电话号码：" id="telephone1"/><br /><br />
					<input type="submit" id="btn1" value="立即抽奖" />
					<button title="关闭">X</button><br />
					<img src="imgs/中奖啦.png" width="100%"/>
				</div>
			</div>
			<div id="img">
				<a href=""><img src="imgs/1.png" width="100%" class="img1"/></a>
				<a href=""><img src="imgs/2.png" width="100%" class="img2"/></a>
			</div>
		</div>
		
		<script type="text/javascript">
			$(function(){
				$("button").click(function(){
					$("#Modal_frame").css("display","none");
				});
			});
			var reg = /^[1]+[34578]+[0-9]{9}/; // 验证电话号码的正则
		        var k = 0;  // 为了保险起见 使用变量
		        $("#btn1").click(function(){    //需要点击的按钮
		            submit("#telephone1");  //需要提交元素的ID
		        });
		
		        function submit(id2){
		            var tel  = $(id2).val();   //  获取表单的值
		            if (tel == ""){
		                alert("手机号不能为空！！");
		            }
		            else
		                if( reg.test(tel)){
		                    if(tel == localStorage.getItem("tel") || k){
		                        alert("亲，您提交的信息我们正在处理！");
		                    }else{
		                        function successMethod(){
		                            alert("恭喜您发送成功！！稍后会有老师向您联系！！");
		                            k = 1;
		                            localStorage.setItem("tel",tel);
		                            $(id1).val(""); //重置表单
		                            $(id2).val(""); //重置表单
		                        }
		                        var modelId = 575;
		                        var cols = []; 
		                        cols.push(tel);
		                        // alert("ok");
		                        saveForm(modelId,cols,successMethod);
		                    }
		                }else{
		                    alert("手机号输入错误！！请重新输入");
		            }
		        }
		</script>
	</body>
</html>
